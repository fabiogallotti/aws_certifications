
# Simple Queue Service (SQS) #

## Introduction ##

It's a queueing service that enables to decouple and scale microservices, distributed systems and serverless applications.

**SQS** is for **Application Integration**. It's a solution for distributed queueing of messages generated by the app. It connects isolated application together by passing messages one to another. It's **pull** based.

With AWS SDK you write code to publish messages in the queue, or you pull the queue for messages.

## Core concepts ##

* **Messaging system** = used to provide asynchronous communication and decouple processes via messages. There are two types:

  * **Queueing**, that generally deletes messages after they are consumed. It's a simple communication, with **no real-time**, and you have to **pull** messages
  * **Streaming**, where multiple consumers can react to events. Events live in the stream for long time, so complex operations can be done. It's **real-time** (e.g. Kafka)

* **Queue** it's a temporary repository for messages that are awaiting to be processed. Two types:
  * **standard**
    * allow nearly-unlimited number of transaction per second
    * guarantees delivery **at least once**
    * best-effort ordering, but no guarantee
  * **FIFO**, if you need guarantee of the ordering.
    * max 300 transaction per second

* Message **size** is between 1 byte and 256Kb. To go beyond you can use **SQS Extended Client Library for Java**, up to 2Gb in size (in this case messages stored in S3)

* Message **retention** is how long the message will stay in the queue before being deleted. By default is 4 days, with minimum of 60s and maximum of 14 days.

* **Visibility timeout**, is the period of time during which the messages are invisible in the SQS queue, after a reader picks it up.
  * Avoid another app to read it while someone is processing it
  * Messages will be deleted after a job has processed it and before the timeout expires. If a job is not processed before the timeout, the message will become visible again and re-processed -> message delivered twice
  * default 30 sec, minimum 0 seconds, maximum 12 hours

* **Polling** is the method to retrieve messages from queues.
  * **Short**, it's default, returns messages immediately, even if the queue is empty
  * **Long**, waits until the message arrives in the queue, or a timeout expires (**most use-cases**)
    * reduces cost, reducing the number of empty receives
